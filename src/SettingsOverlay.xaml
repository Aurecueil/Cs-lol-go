<UserControl x:Class="ModLoader.SettingsOverlay"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#80000000">

    <Grid>
        <Border Width="500" Height="450" 
                Background="{DynamicResource BackgroundBrush}" 
                CornerRadius="12"
                HorizontalAlignment="Center" 
                VerticalAlignment="Center">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Top Bar -->
                <Border Grid.Row="0" 
                        Background="{DynamicResource AccentBrush}" 
                        CornerRadius="12,12,0,0">
                    <Grid>
                        <TextBlock Text="Settings" 
                                   FontSize="18" 
                                   FontWeight="Bold" 
                                   Foreground="White"
                                   HorizontalAlignment="Center" 
                                   VerticalAlignment="Center"/>

                        <TextBlock x:Name="CloseIcon"
                                   Text="❌"
                                   Foreground="White"
                                   FontSize="15"
                                   ToolTip="Close"
                                   Style="{StaticResource IconTextBlockStyle}"
                                   Padding="8"
                                   HorizontalAlignment="Right"
                                   MouseLeftButtonDown="Close_Click"/>
                    </Grid>
                </Border>

                <!-- Settings Content -->
                <ScrollViewer Grid.Row="1" 
                              VerticalScrollBarVisibility="Auto" 
                              HorizontalScrollBarVisibility="Disabled"
                              Margin="20">

                    <StackPanel>
                        <!-- General Section -->
                        <TextBlock Text="General" 
                                   Style="{StaticResource SectionHeaderStyle}"/>

                        <!-- Automatically detect game path -->
                        <Grid Style="{StaticResource OptionRowStyle}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" 
                                       Text="Automatically detect game path" 
                                       Style="{StaticResource OptionLabelStyle}"/>

                            <CheckBox Grid.Column="1" 
                                      x:Name="AutoDetectPathToggle"
                                      Style="{StaticResource ToggleSwitchStyle}"
                                      IsChecked="True"
                                      Checked="AutoDetectPath_Changed"
                                      Unchecked="AutoDetectPath_Changed"/>
                        </Grid>

                        <!-- Game path -->
                        <Grid Style="{StaticResource OptionRowStyle}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" 
                                       Text="Game path" 
                                       Style="{StaticResource OptionLabelStyle}"/>

                            <TextBox Grid.Column="1" 
                                     x:Name="GamePathTextBox"
                                     Style="{StaticResource PathTextBoxStyle}"
                                     Text=""
                                     Margin="10,0,0,0"/>

                            <Button Grid.Column="2" 
                                    Content="Browse..."
                                    Style="{StaticResource BrowseButtonStyle}"
                                    Click="BrowseGamePath_Click"/>
                        </Grid>

                        <!-- Start on startup -->
                        <Grid Style="{StaticResource OptionRowStyle}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" 
                                       Text="Start on startup" 
                                       Style="{StaticResource OptionLabelStyle}"/>

                            <CheckBox Grid.Column="1" 
                                      x:Name="StartOnStartupToggle"
                                      Style="{StaticResource ToggleSwitchStyle}"
                                      IsChecked="False"
                                      Checked="StartOnStartup_Changed"
                                      Unchecked="StartOnStartup_Changed"/>
                        </Grid>

                        <!-- Load mods on start -->
                        <Grid Style="{StaticResource OptionRowStyle}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" 
                                       Text="Load mods on start" 
                                       Style="{StaticResource OptionLabelStyle}"/>

                            <CheckBox Grid.Column="1" 
                                      x:Name="LoadModsOnStartToggle"
                                      Style="{StaticResource ToggleSwitchStyle}"
                                      IsChecked="False"
                                      Checked="LoadModsOnStart_Changed"
                                      Unchecked="LoadModsOnStart_Changed"/>
                        </Grid>

                        <!-- Catch updates -->
                        <Grid Style="{StaticResource OptionRowStyle}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" 
                                       Text="Catch updates" 
                                       Style="{StaticResource OptionLabelStyle}"/>

                            <CheckBox Grid.Column="1" 
                                      x:Name="CatchUpdatesToggle"
                                      Style="{StaticResource ToggleSwitchStyle}"
                                      IsChecked="True"
                                      Checked="CatchUpdates_Changed"
                                      Unchecked="CatchUpdates_Changed"/>
                        </Grid>

                        <!-- Import override -->
                        <Grid Style="{StaticResource OptionRowStyle}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" 
                                       Text="Import override" 
                                       Style="{StaticResource OptionLabelStyle}"/>

                            <ComboBox Grid.Column="1" 
                                      x:Name="ImportOverrideComboBox"
                                      Style="{StaticResource StyledComboBox}"
                                      SelectedIndex="0"
                                      SelectionChanged="ImportOverride_Changed"
                                      Margin="10,0,0,0">
                                <ComboBoxItem Content="No (error)"/>
                                <ComboBoxItem Content="Soft overwrite"/>
                                <ComboBoxItem Content="Hard overwrite"/>
                                <ComboBoxItem Content="Dupe"/>
                            </ComboBox>
                        </Grid>

                        <!-- Theme Section -->
                        <TextBlock Text="Theme" 
                                   Style="{StaticResource SectionHeaderStyle}"/>

                        <!-- Color (placeholder) -->
                        <Grid Style="{StaticResource OptionRowStyle}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" 
                                       Text="Color" 
                                       Style="{StaticResource OptionLabelStyle}"/>

                            <TextBlock Grid.Column="1" 
                                       Text="(Placeholder)" 
                                       Style="{StaticResource OptionLabelStyle}"
                                       Foreground="#FFAAAAAA"
                                       FontStyle="Italic"
                                       Margin="10,0,0,0"/>
                        </Grid>
                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Border>
    </Grid>
</UserControl>